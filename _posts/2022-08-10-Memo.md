---
layout: post
date: 2022-08-10 23:43:00 +0900
title: 'Memo: 정리할 것들'
category:
  - writing
tags:
  - todo
  - memo
img: memo.png # Add image post (optional)
---

* Kramdown table of contents
{:toc .toc}

# View Template
## CSR

## SSR
### Thymeleaf(view) - todo
* Thymeleaf 시작하기  

html 태그에 다음과 같은 url을 입력하여 `th` 명령어를 활성화하도록 하자~
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
...
``` 

> `<p th:text="${model}">word</p>`

model에 `data` key-value로 담아 타임리프 뷰 템플릿이 렌더링될 때
아래 태그는 `empty`를 `data`에 바인딩된 값 `something`로 치환한다.

```html
...
<body>
<p th:text="${data}">empty</p>
</body>
</html>

결과 : <p>something</p>
```

* SpringEL 표현식

```thymeleaf
Object
${user.username} = userA
${user['username']} = userA
${user.getUsername()} = userA

List
${users[0].username} = userA
${users[0]['username']} = userA
${users[0].getUsername()} = userA

Map
${userMap['userA'].username} = userA
${userMap['userA']['username']} = userA
${userMap['userA'].getUsername()} = userA
```
***

# Programming Language
## Java
### AtomicLong(java) - todo
> 멀티쓰레드 환경에서 동시에 다수가 접근할 경우 데이터의 정합성을 보장할 수 없다.  
그래서 위와 같은 상황에 long 타입을 사용해야 한다면 `AtomicLong` 을 고려하라고~ 정리할 것

### ConcurrentHashMap(java) - todo
> AtomicLong 과 같은 이유임. 정리하셈

### Inner Class (Java) - todo

***

# FrameWork
## Spring
### 웹 프로젝트(spring) - todo
* 프로젝트 생성
  + project : gradle
  + Language : java
  + spring boot : 2.7
  + meta data
    - group : xxx
    - artifact : yyy
    - name : yyy
    - package name : group.artifact(=name) *기호제외
    - packaging : Jar
    - java : 11
  + dependencies
    - spring web
    - thymeleaf
    - lombok
* 요구사항 분석
  + 단위 테스트 규모의 프로젝트
  + 상품을 관리하는 서비스 개발
* 상품 도메인 모델
  + 상품ID
  + 상품명
  + 가격
  + 수량
* 상품 관리 기능
  + 상품 목록
  + 상품 상세
  + 상품 등록
  + 상품 수정
- 관련 퍼블리싱 html 전달받음
  + resources/static/html/sth.html
  + static html -> dynamic html
    - view template
    - resources/templates/basic/thymeleaf-sth.html 작업

### spring message (spring) - todo

### request and response data type setting (spring) - todo
> 요청에 의해 소모(consumes)해야 하는 데이터의 타입을 강제할 수 있다.  
```java
// 아래와 같이 json 타입을 강제하면 uri를 호출하는 요청자는 헤더의 데이터 타입을 명시해야한다.
// Content-Type : application/json
@PostMapping(value="/test", consumes = MediaType.APPLICATION_JSON_VALUE)
public void test(@RequestBody Something something){
  // ...
}
```
> 요청에 의한 반환할 생성(produces) 데이터를 정의하는 경우
```java
// 요청자는 반환되는 데이터의 타입을 헤더에 정의하여 요청할 수 있다. 
// Accept:application/json
@ResponseBody
@PostMapping(value="/test", produces = MediaType.APPLICATION_JSON_VALUE)
public void test(@RequestBody Something something){
  // ...
}
```

### Spring Annotation(spring) - todo
* @RequiredArgsContructor
  + 이녀석은 `private final` 객체의 의존성 주입을 생성자를 따로 작성하지 않아도 자동주입해줌
* @ModelAttribute
  + 해당 어노테이션을 선언하면 데이터 객체의 값을 Model 객체에 자동으로 담아준다.
* @RequestParam
  + HttpServletRequest 로 가져오던 parameter 정보를 @RequestParam variableName 으로 가져올 수 있음
* @RequestBody
  + 위의 어노테이션들과 달리 json 데이터인 경우 반드시 명시해야 함. 생략할 수 없음.

### Lombok Annotaion(spring) - todo

***

# Javascript
## SpringEL
* 참고: [SpringEL](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#expressions-operator-safe-navigation)
### ?. (=Safe Navigation Operator)
스프링의 SpringEL이 제공하는 문법 중 하나.
만약 여기에서 errors 가 null 이라면 어떻게 될까?
최초 등록폼에 진입한 시점에는 validation에 의한 errors가 없다.
따라서 errors.containsKey() 를 호출하는 순간 NullPointerException 이 발생한다.
(`errors?.` 에서 `?` 를 떼면 `null.` 처럼 표현할 수 있기 때문에 NPE 발생. 치명적이돠)
errors?. 은 errors 가 null 일때 NullPointerException 이 발생하는 대신, null 을 반환하는 문법이다.
th:if 에서 null 은 실패로 처리되므로 오류 메시지가 출력되지 않는다.
```html
  <div th:if="${errors?.containsKey('globalError')}">
      <p class="field-error" th:text="${errors['globalError']}">전체 오류 메시지</p>
  </div>
```
***
# Tool
## software
### 맥북 스포트라이트 점유율문제(Tool) - end
> 않이, 어제 갑자기 쿨링팬이 돌길래 활성모니터로 상태를 봤더니 점유율이 굉장히 높은 녀석이 있는게 아니겠음?

확인해 보니 스포트라이트 관련된 녀석인데 돌지 말라고 꺼버림! 

    sudo mdutil -a -i off

그러면 스포트라이트 안쓰냐고? 그래서 알프레드 쓰기로 함^.^

### 인텔리제이 properties 한글깨짐현상 (tool) - todo
> 인텔리제이를 사용하다 보면 한글깨짐이 생기는 현상이 있다. 요것을 해결하는 방법
* properties 파일 내 한글깨짐현상
  - prefernce -> File Encodings -> properties files : UTF-8, Transparent native-to-ascii conversion 체크

### 맥 기본 설정 (Tool) - todo
> 내 입맛에 맞춘 나의 방식이야🤣

* 터치패드
  - 터치패드 - 세 손가락 드래그
  - 터치패드 - 탭하여 클릭
* 키보드
  - 키보드 입력, 지연 딜레이 최소화
  - 키보드 - 입력소스 - 두벌식(한글) - 삭제방식 : 글자
  - 키보드 - 텍스트 - 우측 체크박스 해제
* 툴 

***

## DB
### mariaDB (DB) - todo
* WITH RECURSIVE 문 (todo : with 과 비교해서 작성)
  + 메모리 상에 가상의 테이블을 저장
  + 재귀 쿼리를 이용, 실제 테이블을 생성 또는 데이터 Insert 없이 가상 테이블 생성가능
  ```mysql
  //설명
  WITH RECURSIVE 테이블명 AS(
    SELECT 초기값 AS 컬럼별명
    UNION ALL
    SELECT 컬럼별명 계산식 FROM 테이블명 WHERE 제어문
  )
  //예시 : h(컬럼) 초기값 1부터 제어문에 합당하는 5까지의 데이터를 갖는 가상테이블 생성
  WITH RECURSIVE CTE AS(
    SELECT 1 AS h
    UNION ALL
    SELECT h+1 FROM CTE WHERE <5
  )
  SELECT * FROM CTE;
  ```
* IFNULL
  + IFNULL(exp1, exp2)
    - 순차적 체크
    - exp1가 null이 아니면 exp1 반환
    ```mysql
    mysql> SELECT IFNULL(1,0);
        -> 1
    mysql> SELECT IFNULL(NULL,10);
        -> 10
    mysql> SELECT IFNULL(1/0,10);
        -> 10
    mysql> SELECT IFNULL(1/0,'yes');
        -> 'yes'
    ```
***

### Documents (doc) - todo
> 공식 문서들 정리
* 타임리프
  + [타입리프 공식 사이트](https://www.thymeleaf.org/)
  + [타입리프 공식 메뉴얼 - 기본 기능](https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html)
  + [타입리프 공식 메뉴얼 - 스프링 통합](https://www.thymeleaf.org/doc/tutorials/3.0/thymeleafspring.html)


### HTML Form (HTTP) - todo
> HTML Form 전송은 PUT, PATCH를 지원하지 않는다.  
GET, POST만 사용할 수 있음. 정리할 것.

### PRG[POST/Redirect/GET] (HTTP) - todo

### TLD:Tag Library Description (Servlet/JSP) - todo