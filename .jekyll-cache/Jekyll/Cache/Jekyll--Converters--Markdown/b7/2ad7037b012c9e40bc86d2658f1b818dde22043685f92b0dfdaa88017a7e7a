I"<ul class="toc" id="markdown-toc">
  <li><a href="#ì°¸ê³ í•œ-ê¸€" id="markdown-toc-ì°¸ê³ í•œ-ê¸€">ì°¸ê³ í•œ ê¸€</a></li>
  <li><a href="#ë¸Œë¼ìš°ì €-í˜¸í™˜" id="markdown-toc-ë¸Œë¼ìš°ì €-í˜¸í™˜">ë¸Œë¼ìš°ì € í˜¸í™˜</a></li>
</ul>

<h4 id="ì°¸ê³ í•œ-ê¸€">ì°¸ê³ í•œ ê¸€</h4>
<ul>
  <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage">https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage</a></li>
</ul>

<h4 id="ë¸Œë¼ìš°ì €-í˜¸í™˜">ë¸Œë¼ìš°ì € í˜¸í™˜</h4>
<p>IEëŠ” 11ë¶€í„° ì™„ì „íˆ ì§€ì›í•˜ê³  IE8, IE9ëŠ” í”„ë ˆì„ì—ì„œë§Œ, IE10ì€ ì œí•œì ìœ¼ë¡œë§Œ ì§€ì›í•œë‹¤. ê·¸ ì™¸ ë¸Œë¼ìš°ì €ëŠ” ëª¨ë‘ ê°€ëŠ¥í•œê±¸ë¡œâ€¦ <del>ì•…ì˜ì¶•</del></p>

<p>ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ì–´ë–¤ ìœˆë„ìš°ì™€ ë˜ ë‹¤ë¥¸ ìœˆë„ìš°ì˜ ìŠ¤í‚´ê³¼ í˜¸ìŠ¤íŠ¸ëª…, ê·¸ë¦¬ê³  í¬íŠ¸ë²ˆí˜¸ê°€ ì™„ì „íˆ ì¼ì¹˜í•˜ì§€ ì•Šì„ë•Œ, ë‘ ìœˆë„ìš°ê°„ì˜ ìƒí˜¸ì‘ìš©ì„ ì°¨ë‹¨í•œë‹¤. ì´ê²ƒì€ <a href="https://developer.mozilla.org/ko/docs/Web/Security/Same-origin_policy">ë™ì¼ ì¶œì²˜ ì›ì¹™(same origin policy)</a>ì˜ ì œì•½ì‚¬í•­ì´ë©° ì¶œì²˜ê°€ ë‹¤ë¥¸ ë‘ ìœˆë„ìš°ë¥¼ êµì°¨ ì¶œì²˜(cross origin) ìƒíƒœì— ìˆë‹¤ê³  í•œë‹¤.</p>

<p>êµì°¨ ì¶œì²˜ì¸ ìœˆë„ìš°ì˜ ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ ì¦‰, í”„ë¡œí¼í‹°ë¡œì˜ ì ‘ê·¼ì€ ëŒ€ë¶€ë¶„ ì°¨ë‹¨ëœë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤. ê°€ë ¹ A ìœˆë„ìš°ì—ì„œ êµì°¨ ì¶œì²˜ì¸ B ìœˆë„ìš°ì˜ ì£¼ì†Œë¥¼ Locationì„ í†µí•´ ê°€ì ¸ì˜¤ë ¤ê³  í•˜ë©´ DOMExceptionì´ ë°œìƒí•˜ë©´ì„œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì¤‘ë‹¨ë˜ëŠ” ì‹ì´ë‹¤. ì°¸ê³ ë¡œ êµì°¨ ì¶œì²˜ ìƒíƒœì¼ ë•Œ locationìœ¼ë¡œ ì£¼ì†Œë¥¼ ì•Œì•„ë‚¼ ìˆ˜ëŠ” ì—†ì§€ë§Œ ì£¼ì†Œë¥¼ ë°”ê¿€ ìˆ˜ëŠ” ìˆë‹¤.</p>

<p>í•˜ì—¬ê°„ ì´ëŸ° ë™ì¼ ì¶œì²˜ ì›ì¹™ì˜ ì œì•½ì„ ìš°íšŒí•  ìˆ˜ ìˆëŠ”ê²Œ(ë¹„ë¡ ì—„ê²©í•œ ì¡°ê±´ í•˜ì—ì„œë§Œ ê°€ëŠ¥í•˜ì§€ë§Œ) ë°”ë¡œ Window.postMessageë‹¤.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>otherWindow.postMessage(message, targetOrigin, [transfer]);
</code></pre></div></div>
<ul>
  <li><strong>message</strong>: ë‹¤ë¥¸ ìœˆë„ìš°ì— ì „ë‹¬í•  ë©”ì‹œì§€</li>
  <li><strong>targetOrigin</strong>: ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•  ìœˆë„ìš°ì˜ ì¶œì²˜ë¥¼ ëª…ì‹œí•œë‹¤. ëŒ€ìƒ ìœˆë„ìš°ì˜ ìŠ¤í‚´, í˜¸ìŠ¤íŠ¸ëª…, í¬íŠ¸ë²ˆí˜¸ê°€ targetOriginì— ëª…ì‹œëœ ê²ƒê³¼ ì •í™•íˆ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ë©”ì‹œì§€ëŠ” ì°¨ë‹¨ëœë‹¤.</li>
  <li><strong>transfer</strong>: Is a sequence of Transferable objects that are transferred with the message. The ownership of these objects is given to the destination side and they are no longer usable on the sending side.</li>
</ul>

<p>ì•„ë˜ëŠ” êµì°¨ ì¶œì²˜ì¸ A ìœˆë„ìš° <code class="language-plaintext highlighter-rouge">http://tistory.com</code>ê³¼ B ìœˆë„ìš° <code class="language-plaintext highlighter-rouge">https://secure.tistory.com</code>ì´ ì„œë¡œ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ëŠ” ì½”ë“œë‹¤.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// B ìœˆë„ìš°ì—ì„œ í•¸ë“¤ëŸ¬ ì„¤ì •</span>
<span class="kd">function</span> <span class="nx">receiveBeginningMessage</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">origin</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">http://tistory.com</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// A ìœˆë„ìš°ì—ì„œ ë³´ë‚¸ ë©”ì‹œì§€</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="dl">"</span><span class="s2">my location is </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">origin</span><span class="p">);</span>
<span class="p">}</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="nx">receiveBeginningMessage</span><span class="p">);</span>
</code></pre></div></div>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A ìœˆë„ìš°ì—ì„œ í•¸ë“¤ëŸ¬ ì„¤ì •</span>
<span class="kd">function</span> <span class="nx">receiveReturnMessage</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// B ìœˆë„ìš°ì—ì„œ ë³´ë‚¸ ë©”ì‹œì§€</span>
<span class="p">}</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="nx">receiveReturnMessage</span><span class="p">);</span>
</code></pre></div></div>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A ìœˆë„ìš°ì—ì„œ Window.postMessage ì‚¬ìš©</span>
<span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="nx">child</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="dl">"</span><span class="s2">whispering</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">https://secure.tistory.com</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>
<p>ìˆœì„œëŠ” ëŒ€ëµ:</p>
<ul>
  <li>ì–‘ìª½ ìœˆë„ìš°ì— ë©”ì‹œì§€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡</li>
  <li>A ìœˆë„ìš°ì—ì„œ Window.postMessage í˜¸ì¶œ</li>
  <li>B ìœˆë„ìš°ì—ì„œ ë©”ì‹œì§€ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ê³  í•¸ë“¤ëŸ¬ ì‘ë™. ì´ ë•Œ ë¡œê·¸ë¡œ A ìœˆë„ìš°ê°€ ë³´ë‚¸ messageë¥¼ ì¶œë ¥í•˜ê³  A ìœˆë„ìš°ë¡œ ë©”ì‹œì§€ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚´</li>
  <li>A ìœˆë„ìš°ì—ì„œ ë©”ì‹œì§€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì‘ë™í•˜ë©° B ìœˆë„ìš°ê°€ ë³´ë‚¸ ë©”ì‹œì§€ ì¶œë ¥</li>
</ul>
:ET